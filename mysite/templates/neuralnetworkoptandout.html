<!DOCTYPE html>
<html lang="en" dir="ltr">
  {% include "head.html" %}

<body class="header-fixed sidebar-fixed sidebar-dark header-light" id="body">
  
  <script>
    NProgress.configure({ showSpinner: false });
    NProgress.start();
  </script>

  <div class="mobile-sticky-body-overlay"></div>

  
  <div id="toaster"></div>
  

  <div class="wrapper">
    {% include "leftsidebar.html" %}

    

    <div class="page-wrapper">
                <!-- Header -->
          <header class="main-header " id="header">
            <nav class="navbar navbar-static-top navbar-expand-lg">
              <!-- Sidebar toggle button -->
              <button id="sidebar-toggler" class="sidebar-toggle">
                <span class="sr-only">Toggle navigation</span>
              </button>
              <!-- search form -->
              <div class="search-form d-none d-lg-inline-block">
                <div class="input-group">
                  <button type="button" name="search" id="search-btn" class="btn btn-flat">
                    <i class="mdi mdi-magnify"></i>
                  </button>
                  <input type="text" name="query" id="search-input" class="form-control" placeholder="'button', 'chart' etc."
                    autofocus autocomplete="off" />
                </div>
                <div id="search-results-container">
                  <ul id="search-results"></ul>
                </div>
              </div>

              <div class="navbar-right ">
                <ul class="nav navbar-nav">
                  <li class="dropdown notifications-menu">
                    <button class="dropdown-toggle" data-toggle="dropdown">
                      <i class="mdi mdi-bell-outline"></i>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-right">
                      <li class="dropdown-header">You have 5 notifications</li>
                      <li>
                        <a href="#">
                          <i class="mdi mdi-account-plus"></i> New user registered
                          <span class=" font-size-12 d-inline-block float-right"><i class="mdi mdi-clock-outline"></i> 10 AM</span>
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <i class="mdi mdi-account-remove"></i> User deleted
                          <span class=" font-size-12 d-inline-block float-right"><i class="mdi mdi-clock-outline"></i> 07 AM</span>
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <i class="mdi mdi-chart-areaspline"></i> Sales report is ready
                          <span class=" font-size-12 d-inline-block float-right"><i class="mdi mdi-clock-outline"></i> 12 PM</span>
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <i class="mdi mdi-account-supervisor"></i> New client
                          <span class=" font-size-12 d-inline-block float-right"><i class="mdi mdi-clock-outline"></i> 10 AM</span>
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <i class="mdi mdi-server-network-off"></i> Server overloaded
                          <span class=" font-size-12 d-inline-block float-right"><i class="mdi mdi-clock-outline"></i> 05 AM</span>
                        </a>
                      </li>
                      <li class="dropdown-footer">
                        <a class="text-center" href="#"> View All </a>
                      </li>
                    </ul>
                  </li>
                  <!-- User Account -->
                  <li class="dropdown user-menu">
                    <button href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                      <img src="/assets/img/user/user.png" class="user-image" alt="User Image" />
                      <span class="d-none d-lg-inline-block">Abdus Salam</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-right">
                      <!-- User image -->
                      <li class="dropdown-header">
                        <img src="/assets/img/user/user.png" class="img-circle" alt="User Image" />
                        <div class="d-inline-block">
                          Abdus Salam <small class="pt-1">iamabdus@gmail.com</small>
                        </div>
                      </li>

                      <li>
                        <a href="user-profile.html">
                          <i class="mdi mdi-account"></i> My Profile
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <i class="mdi mdi-email"></i> Message
                        </a>
                      </li>
                      <li>
                        <a href="#"> <i class="mdi mdi-diamond-stone"></i> Projects </a>
                      </li>
                      <li>
                        <a href="#"> <i class="mdi mdi-settings"></i> Account Setting </a>
                      </li>

                      <li class="dropdown-footer">
                        <a href="index.html"> <i class="mdi mdi-logout"></i> Log Out </a>
                      </li>
                    </ul>
                  </li>
                </ul>
              </div>
            </nav>


          </header>


      <div class="content-wrapper">
        <div class="content">	
          <form action="{% url 'uploadoptandout' project.pk %}" method="POST">
              {% csrf_token %}
          <div class="col-lg-8">
            <div class="card card-default">
                <div class="card-header card-header-border-bottom">
                  <h2>Select Output Layer</h2>
                </div>
                <div class="card-body">
                  
                  <table class="table table-striped">
                        <thead>
                          <tr>
                            <th scope="col">#</th>
                            <th scope="col">Layer Type Selection</th>
                            <th scope="col">Configuration</th>
                            <th scope="col">Options</th>
                          </tr>
                        </thead>
                        <tbody id="networkconfbody">
                          
                        </tbody>
                      </table>
                      
                      

                      {% include "neuralnetworkhelper.html" %}

                </div>
              </div>
            </div>
            
            <script type="text/javascript">
            if (counter == counteronloaded){
              createnewlayer();
            } 
            
              optimizeroptions = {};
              //{% for opti in optimizers %}
              optimizeroptions["{{opti.0}}"] = [];
                //{% for option in opti.1 %}
                optimizeroptions["{{opti.0}}"].push({"{{option.0}}":"{{option.1}}"})
                //{% endfor %}  

              //{% endfor %}  

              optimizerconfiguration = {};
              //{% for optconf in optimizerconfiguration %}
              optimizerconfiguration["{{optconf.fieldname}}"] = "{{optconf.option}}";
              //{% endfor %}  
              function onselectionchanged(event){
                var seltype = event.target.value
                changeOptimizerOptions(seltype)
                
                
              }

              function changeOptimizerOptions(optimizertype){
                var toadd = document.getElementById("itemdefinition");
                toadd.innerHTML = ""
                
                var cur_options = optimizeroptions[optimizertype];
                if(cur_options){
                  cur_options.forEach(function(e){
                    allkeys = Object.keys(e);
                    optionname = allkeys[0];
                    optiondefaultvalue = e[allkeys[0]];

                    var trnode = document.createElement('tr');
                    var tdnode1 = document.createElement('td');
                    var textnode = document.createTextNode(optionname); 
                    var tdnode2 = document.createElement('td');
                    var inputnode = document.createElement('input');
                    
                    inputnode.setAttribute('placeholder',optiondefaultvalue)
                    inputnode.setAttribute('name',"optpara"+optimizertype+'$'+optionname)
                    if(optimizerconfiguration[optionname]){
                      inputnode.setAttribute('value',optimizerconfiguration[optionname])
                    }
                    trnode.appendChild(tdnode1);
                    tdnode1.appendChild(textnode);
                    trnode.appendChild(tdnode2);
                    tdnode2.appendChild(inputnode);
                    toadd.appendChild(trnode); 
                  })
                }
              }

            </script>

            <div class="col-lg-8">
                <div class="card card-default">
                  <div class="card-header card-header-border-bottom">
                    <h2>Select Optimizer</h2>
                  </div>
                  <div class="card-body">
                      <label for="optimizerselect">Choose Optimizer</label>
                    <select onchange="onselectionchanged(event)" id="optimizerselect" name="optimizerselect">
                      <option>Please select...</option>
                      {% for opti in optimizers %}
                      <option {% if opti.0 == optimizername %}selected{% endif %} >{{opti.0}}</option>
                      {% endfor %}  
                    </select>
                    <table>
                      <thead>
                        <tr>
                            <th>Option</th>
                            <th>Value</th>
                          </tr>
                          </thead>
                      <tbody id="itemdefinition">
                        <tr>
                          <td colspan="2">Choose Optimizer first.</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
				
</div>
<script type="text/javascript">
  changeOptimizerOptions("{{optimizername}}")
</script>

<div class="col-lg-8">
  <div class="card card-default">
    <!--<div class="card-header card-header-border-bottom">
      <h2>Select Optimizer</h2>
    </div>-->
    <div class="card-body">
        <button type="submit" class="mb-1 btn btn-block btn-primary">Submit</button>
    </div>
    </div>
  </form>    
</div>

        


      

</div>
    </div>	

    {% include "footer.html" %}

    </div>
  </div>

  



  {% include "scripts.html" %}

</body>

</html>
